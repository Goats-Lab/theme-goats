{%- comment -%}
------------------------------------------------------------------------------------------------------------------------
CSS
------------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

<style>
  #shopify-section-{{ section.id }} {
    --collection-list-gap: 1.5rem;
  }

  .mc-collections {
    background: #05030f;
    border-radius: 28px;
    padding: 2.5rem 1.5rem;
  }

  @media screen and (min-width: 900px) {
    .mc-collections {
      padding: 3.25rem 2rem;
    }
  }

  .mc-collections__head {
    text-align: center;
    margin-bottom: 2rem;
  }

  .mc-collections__eyebrow {
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: .18em;
    color: #ff9be9;
    margin-bottom: 0.25rem;
  }

  .mc-collections__title {
    font-size: 1.6rem;
    color: #ffffff;
    margin: 0;
  }

  .mc-collections__subtitle {
    margin: 0.5rem auto 0;
    max-width: 540px;
    font-size: 0.9rem;
    color: #e7d7ff;
    opacity: 0.9;
  }

  .mc-collections__brand-group {
    margin-top: 2.25rem;
  }

  .mc-collections__brand-head {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 0.75rem;
    margin-bottom: 0.85rem;
  }

  .mc-collections__brand-chip {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: .16em;
    color: #ffb7f1;
  }

  .mc-collections__brand-title {
    font-size: 1.1rem;
    color: #ffffff;
    margin: 0;
  }

  .mc-collections__rail {
    display: flex;
    gap: var(--collection-list-gap);
    overflow-x: auto;
    padding-bottom: 0.75rem;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
  }

  .mc-collections__rail::-webkit-scrollbar {
    height: 6px;
  }

  .mc-collections__rail::-webkit-scrollbar-track {
    background: transparent;
  }

  .mc-collections__rail::-webkit-scrollbar-thumb {
    background: rgba(255, 155, 233, 0.5);
    border-radius: 999px;
  }

  .mc-collections-card {
    scroll-snap-align: start;
    position: relative;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    border-radius: 22px;
    padding: 0.75rem;
    background:
      radial-gradient(circle at top left, #1e1237 0, #05030f 40%, #05030f 100%);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.02),
      0 18px 40px rgba(0, 0, 0, 0.85),
      0 0 28px rgba(255, 120, 210, 0.22);
    overflow: hidden;
    transition: transform .18s ease, box-shadow .18s ease;
    min-width: 250px;
    max-width: 280px;
    flex: 0 0 auto;
  }

  .mc-collections-card:hover {
    transform: translateY(-4px);
    box-shadow:
      0 24px 50px rgba(0, 0, 0, 0.95),
      0 0 32px rgba(255, 120, 210, 0.5);
  }

  .mc-collections-card__media {
    position: relative;
    border-radius: 18px;
    overflow: hidden;
    background: #0b0815;
    aspect-ratio: 4 / 5;
  }

  .mc-collections-card__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1.03);
    transition: transform .4s ease;
    display: block;
  }

  .mc-collections-card:hover .mc-collections-card__media img {
    transform: scale(1.07);
  }

  .mc-collections-card__overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(2, 0, 12, 0.1) 0%,
      rgba(2, 0, 12, 0.35) 45%,
      rgba(2, 0, 12, 0.9) 100%
    );
  }

  .mc-collections-card__body {
    position: absolute;
    inset-inline: 0.9rem;
    bottom: 0.9rem;
    color: #fff;
    z-index: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .mc-collections-card__brand-pill {
    display: inline-flex;
    align-items: center;
    padding: 0.1rem 0.65rem;
    border-radius: 999px;
    font-size: 0.7rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    background: rgba(5, 3, 18, 0.85);
    border: 1px solid rgba(255, 163, 232, 0.6);
    align-self: flex-start;
  }

  .mc-collections-card__title {
    margin: 0;
    font-size: 0.98rem;
    font-weight: 650;
  }

  .mc-collections-card__subtitle {
    margin: 0;
    font-size: 0.8rem;
    color: #f4dcff;
    opacity: 0.9;
  }
</style>

{%- comment -%}
------------------------------------------------------------------------------------------------------------------------
LIQUID
------------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

{%- assign color_scheme_hash = section.settings.color_scheme.settings.background_gradient | default: section.settings.color_scheme.settings.background | md5 -%}

<div class="section-spacing color-scheme color-scheme--{{ section.settings.color_scheme.id }} color-scheme--bg-{{ color_scheme_hash }}">
  {%- if collections.size == 0 -%}
    <div class="container container--xs">
      <div class="empty-state">
        <div class="prose">
          <h1 class="h4">{{ 'collection.general.all_collections' | t }}</h1>
          <p>{{ 'collection.general.no_collections' | t }}</p>

          {%- assign button_content = 'collection.general.continue_shopping' | t -%}
          {%- render 'button', content: button_content, href: routes.root_url -%}
        </div>
      </div>
    </div>
  {%- else -%}
    <div class="container">
      <div class="mc-collections">
        {%- if section.settings.show_title -%}
          <header class="mc-collections__head">
            <div class="mc-collections__eyebrow">Cat√°logo por marca</div>
            {%- if request.page_type == 'list-collections' -%}
              <h1 class="mc-collections__title">{{ 'collection.general.all_collections' | t }}</h1>
            {%- else -%}
              <h1 class="mc-collections__title">{{ page.title }}</h1>
            {%- endif -%}
            <p class="mc-collections__subtitle">
              Escolha a marca e o tipo de joia para filtrar facilmente entre Pandora, Tiffany e Swarovski.
            </p>
          </header>
        {%- endif -%}

        {%- paginate collections by 48 -%}
          {%- assign collections_to_show = section.settings.collections | default: collections -%}

          {%- comment -%}
            BLOCO PANDORA
          {%- endcomment -%}
          {%- assign has_pandora = false -%}
          {%- for c in collections_to_show -%}
            {%- if c.title contains 'Pandora' -%}
              {%- assign has_pandora = true -%}
              {%- break -%}
            {%- endif -%}
          {%- endfor -%}

          {%- if has_pandora -%}
            <section class="mc-collections__brand-group">
              <div class="mc-collections__brand-head">
                <span class="mc-collections__brand-chip">Marca</span>
                <h2 class="mc-collections__brand-title">Pandora</h2>
              </div>

              <div class="mc-collections__rail">
                {%- for collection in collections_to_show -%}
                  {%- if collection.featured_image == blank or section.settings.collections == empty and collection.handle == 'frontpage' -%}
                    {%- continue -%}
                  {%- endif -%}
                  {%- if collection.title contains 'Pandora' -%}
                    <a href="{{ collection.url }}" class="mc-collections-card group">
                      <div class="mc-collections-card__media">
                        {%- capture sizes -%}
                          (max-width: 699px) 80vw,
                          (max-width: 1149px) 40vw,
                          320px
                        {%- endcapture -%}

                        {%- assign loading_strategy = nil -%}
                        {%- if forloop.index > 3 -%}
                          {%- assign loading_strategy = 'lazy' -%}
                        {%- endif -%}

                        {{- collection.featured_image
                          | image_url: width: collection.featured_image.width
                          | image_tag:
                              loading: loading_strategy,
                              sizes: sizes,
                              widths: '300,400,600,800,1000,1200',
                              class: 'mc-collections-card__img',
                              draggable: 'false'
                        -}}

                        <div class="mc-collections-card__overlay"></div>

                        <div class="mc-collections-card__body">
                          <span class="mc-collections-card__brand-pill">Pandora</span>
                          <p class="mc-collections-card__title">
                            {{ collection.title }}
                          </p>
                          {%- if collection.description != blank -%}
                            <p class="mc-collections-card__subtitle">
                              {{ collection.description | strip_html | truncate: 80 }}
                            </p>
                          {%- endif -%}
                        </div>
                      </div>
                    </a>
                  {%- endif -%}
                {%- endfor -%}
              </div>
            </section>
          {%- endif -%}

          {%- comment -%}
            BLOCO TIFFANY
          {%- endcomment -%}
          {%- assign has_tiffany = false -%}
          {%- for c in collections_to_show -%}
            {%- if c.title contains 'Tiffany' -%}
              {%- assign has_tiffany = true -%}
              {%- break -%}
            {%- endif -%}
          {%- endfor -%}

          {%- if has_tiffany -%}
            <section class="mc-collections__brand-group">
              <div class="mc-collections__brand-head">
                <span class="mc-collections__brand-chip">Marca</span>
                <h2 class="mc-collections__brand-title">Tiffany</h2>
              </div>

              <div class="mc-collections__rail">
                {%- for collection in collections_to_show -%}
                  {%- if collection.featured_image == blank or section.settings.collections == empty and collection.handle == 'frontpage' -%}
                    {%- continue -%}
                  {%- endif -%}
                  {%- if collection.title contains 'Tiffany' -%}
                    <a href="{{ collection.url }}" class="mc-collections-card group">
                      <div class="mc-collections-card__media">
                        {%- capture sizes -%}
                          (max-width: 699px) 80vw,
                          (max-width: 1149px) 40vw,
                          320px
                        {%- endcapture -%}

                        {%- assign loading_strategy = nil -%}
                        {%- if forloop.index > 3 -%}
                          {%- assign loading_strategy = 'lazy' -%}
                        {%- endif -%}

                        {{- collection.featured_image
                          | image_url: width: collection.featured_image.width
                          | image_tag:
                              loading: loading_strategy,
                              sizes: sizes,
                              widths: '300,400,600,800,1000,1200',
                              class: 'mc-collections-card__img',
                              draggable: 'false'
                        -}}

                        <div class="mc-collections-card__overlay"></div>

                        <div class="mc-collections-card__body">
                          <span class="mc-collections-card__brand-pill">Tiffany</span>
                          <p class="mc-collections-card__title">
                            {{ collection.title }}
                          </p>
                          {%- if collection.description != blank -%}
                            <p class="mc-collections-card__subtitle">
                              {{ collection.description | strip_html | truncate: 80 }}
                            </p>
                          {%- endif -%}
                        </div>
                      </div>
                    </a>
                  {%- endif -%}
                {%- endfor -%}
              </div>
            </section>
          {%- endif -%}

          {%- comment -%}
            BLOCO SWAROVSKI
          {%- endcomment -%}
          {%- assign has_swarovski = false -%}
          {%- for c in collections_to_show -%}
            {%- if c.title contains 'Swarovski' -%}
              {%- assign has_swarovski = true -%}
              {%- break -%}
            {%- endif -%}
          {%- endfor -%}

          {%- if has_swarovski -%}
            <section class="mc-collections__brand-group">
              <div class="mc-collections__brand-head">
                <span class="mc-collections__brand-chip">Marca</span>
                <h2 class="mc-collections__brand-title">Swarovski</h2>
              </div>

              <div class="mc-collections__rail">
                {%- for collection in collections_to_show -%}
                  {%- if collection.featured_image == blank or section.settings.collections == empty and collection.handle == 'frontpage' -%}
                    {%- continue -%}
                  {%- endif -%}
                  {%- if collection.title contains 'Swarovski' -%}
                    <a href="{{ collection.url }}" class="mc-collections-card group">
                      <div class="mc-collections-card__media">
                        {%- capture sizes -%}
                          (max-width: 699px) 80vw,
                          (max-width: 1149px) 40vw,
                          320px
                        {%- endcapture -%}

                        {%- assign loading_strategy = nil -%}
                        {%- if forloop.index > 3 -%}
                          {%- assign loading_strategy = 'lazy' -%}
                        {%- endif -%}

                        {{- collection.featured_image
                          | image_url: width: collection.featured_image.width
                          | image_tag:
                              loading: loading_strategy,
                              sizes: sizes,
                              widths: '300,400,600,800,1000,1200',
                              class: 'mc-collections-card__img',
                              draggable: 'false'
                        -}}

                        <div class="mc-collections-card__overlay"></div>

                        <div class="mc-collections-card__body">
                          <span class="mc-collections-card__brand-pill">Swarovski</span>
                          <p class="mc-collections-card__title">
                            {{ collection.title }}
                          </p>
                          {%- if collection.description != blank -%}
                            <p class="mc-collections-card__subtitle">
                              {{ collection.description | strip_html | truncate: 80 }}
                            </p>
                          {%- endif -%}
                        </div>
                      </div>
                    </a>
                  {%- endif -%}
                {%- endfor -%}
              </div>
            </section>
          {%- endif -%}

          {%- if section.settings.collections == empty -%}
            {%- render 'pagination', paginate: paginate -%}
          {%- endif -%}
        {%- endpaginate -%}
      </div>
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "t:sections.main_list_collections.name",
  "class": "shopify-section--main-list-collections",
  "tag": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:global.colors.scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_title",
      "label": "t:sections.main_list_collections.show_title",
      "default": true
    },
    {
      "type": "collection_list",
      "id": "collections",
      "label": "t:sections.main_list_collections.selected_collections",
      "limit": 48
    },
    {
      "type": "select",
      "id": "collections_per_row_mobile",
      "label": "t:sections.collection_list.collections_per_row_mobile",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "collections_per_row_desktop",
      "min": 1,
      "max": 4,
      "label": "t:sections.collection_list.collections_per_row_desktop",
      "default": 3
    },
    {
      "type": "select",
      "id": "image_size",
      "label": "t:global.image.size",
      "info": "t:global.image.ratio_avoid_cropping_info",
      "options": [
        {
          "value": "auto",
          "label": "t:global.sizes.original_image_ratio"
        },
        {
          "value": "xs",
          "label": "t:global.sizes.x_small"
        },
        {
          "value": "sm",
          "label": "t:global.sizes.small"
        },
        {
          "value": "md",
          "label": "t:global.sizes.medium"
        },
        {
          "value": "lg",
          "label": "t:global.sizes.large"
        }
      ],
      "default": "auto"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "t:global.position.content_position",
      "options": [
        {
          "value": "place-self-start text-start",
          "label": "t:global.position.top_left"
        },
        {
          "value": "place-self-start-center text-center",
          "label": "t:global.position.top_center"
        },
        {
          "value": "place-self-start-end text-end",
          "label": "t:global.position.top_right"
        },
        {
          "value": "place-self-center-start text-start",
          "label": "t:global.position.middle_left"
        },
        {
          "value": "place-self-center text-center",
          "label": "t:global.position.middle_center"
        },
        {
          "value": "place-self-center-end text-end",
          "label": "t:global.position.middle_right"
        },
        {
          "value": "place-self-end-start text-start",
          "label": "t:global.position.bottom_left"
        },
        {
          "value": "place-self-end-center text-center",
          "label": "t:global.position.bottom_center"
        },
        {
          "value": "place-self-end text-end",
          "label": "t:global.position.bottom_right"
        }
      ],
      "default": "place-self-end-start text-start"
    },
    {
      "type": "header",
      "content": "t:global.colors.category"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:global.colors.text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "t:global.colors.overlay_color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "t:global.colors.overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 30
    }
  ]
}
{% endschema %}
